var Board=function(){function n(t){var u,i,r;for(this._squares=[],this._scaleRatio=1,this._canvas=t,this._context=this._canvas.getContext("2d"),u=0,i=0;i<8;i++)for(r=0;r<8;r++){var f=n.SquareSize*i,e=n.SquareSize*r,o=(i+r)%2!=0?n.DarkColor:n.LightColor;this._squares.push(new BoardSquare(n.getSquareId(i,r),f,e,n.SquareSize,o)),u++}}return n.DarkColor="#A8864A",n.LightColor="#F0E0C5",n.SelectedColor="#7E1BE0",n.SquareSize=45,n.getSquareId=function(n,t){return String.fromCharCode(97+n)+(t-8)*-1},n.prototype.getEnPassantSquare=function(){return this._enPassantSquare},n.prototype.setEnPassantSquare=function(n){this._enPassantSquare=n},n.prototype.getSquares=function(){return this._squares},n.prototype.getCanvasSize=function(){return Math.min($(window).width()-15,$(window).height()-100)},n.prototype.draw=function(){this._canvasSize=this.getCanvasSize(),this._canvas.width=this._canvasSize,this._canvas.height=this._canvasSize,this.scale(),this._context.strokeStyle=n.DarkColor,this._context.fillStyle=n.LightColor,this._context.fillRect(0,0,length,length);for(var t=0;t<this._squares.length;t++)this.drawSquare(this._squares[t]);this._context.strokeRect(0,0,length,length)},n.prototype.getSquareById=function(n){for(var i,t=0;t<this._squares.length;t++)if(i=this._squares[t],i.getId()==n)return i},n.prototype.drawSquare=function(n){n.draw(this._context)},n.prototype.scale=function(){var t=n.SquareSize<<3;this._scaleRatio=this._canvasSize/t,this._context.scale(this._scaleRatio,this._scaleRatio)},n.prototype.selectSquare=function(n){for(var t,i=0;i<this._squares.length;i++)t=this._squares[i],t==n?(t.setSelected(!0),t.draw(this._context)):t.getSelected()&&(t.setSelected(!1),t.draw(this._context))},n.prototype.getSelectedSquare=function(t,i){for(var f=t/this._scaleRatio,e=i/this._scaleRatio,o=n.SquareSize,r,u=0;u<this._squares.length;u++)if(r=this._squares[u],r.getX()<f&&r.getX()>f-o&&r.getY()<e&&r.getY()>e-o)return r;return null},n}()